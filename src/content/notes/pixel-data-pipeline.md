---
title: "图片读取与转换"
description: "游戏制作中有时需要读取图片像素，本文记录在运行时直接读取图片像素，与在引擎外预处理并转换为其他数据格式之间的性能与资源取舍。"
cover: images/notes/pixel-data-pipeline/Ocean.png
tags: ["优化","资源管理","引擎开发"]
date: "2026-1-4"
draft: false
---

## 直接加载图片
&emsp;&emsp;

## 可读数据格式

### Json
&emsp;&emsp;JSON是常见的文本数据格式，可读性好，但在体积和解析效率上并不占优。<br/>
![测试图片](../../../public/images/notes/pixel-data-pipeline/3.png)这是一个20*20像素的图片，大小为**661Byte**。在转换为Json并保留想要的格式后格式如下
```json
{
  "width": 20,
  "height": 20,
  "colorCount": 6,
  "pixels": [
    3,3,3,3,10,10,5,5,3,3,3,3,5,5,10,10,3,3,3,3,
    3,3,3,10,8,5,8,10,3,3,3,3,10,8,5,8,10,3,3,3,
    3,3,3,10,8,5,5,8,10,10,10,10,8,5,5,8,10,3,3,3,
    3,3,10,8,10,10,10,10,8,8,8,8,10,10,10,10,8,10,3,3,
    3,3,10,8,5,5,5,5,8,8,8,8,5,5,5,5,8,10,3,3,
    3,3,10,8,5,5,2,2,8,8,8,8,2,2,5,5,8,10,3,3,
    3,3,10,8,5,2,2,2,2,8,8,2,2,2,2,5,8,10,3,3,
    3,3,10,8,2,12,12,2,2,5,5,2,2,12,12,2,8,10,3,3,
    3,10,10,8,2,12,12,12,2,2,2,2,12,12,12,2,8,10,10,3,
    3,10,8,2,2,2,2,2,2,2,2,2,2,2,2,2,2,8,10,3,
    10,8,2,2,2,2,2,2,12,12,12,12,2,2,2,2,2,2,8,10,
    10,8,2,2,2,2,2,2,12,12,12,12,2,2,2,2,2,2,8,10,
    10,8,2,2,2,12,2,2,2,12,12,2,2,2,12,2,2,2,8,10,
    5,10,2,2,2,2,12,12,12,12,12,12,12,12,2,2,2,2,10,5,
    5,10,2,2,2,2,2,2,12,12,12,12,2,2,2,2,2,2,10,5,
    3,3,10,2,2,2,2,2,2,12,12,2,2,2,2,2,2,10,3,3,
    3,3,3,10,2,2,2,2,2,2,2,2,2,2,2,2,10,3,3,3,
    3,3,3,3,10,10,10,2,2,2,2,2,2,10,10,10,3,3,3,3,
    3,3,3,3,5,5,5,10,10,10,10,10,10,5,5,5,3,3,3,3
  ]
}
```
即使将数据压缩成一行大小也有**910Byte**，体积增大会带来更多 IO 成本，且实际运行的时候仍然要 **JSON.parse** 构建对象和数据结构，从而产生更多的分配与GC压力，总体上也未必能“换到性能”。Json还是更适合结构化、规模较小、低频读取的数据（如玩家存档、配置表、调试数据等）。
### Bin

# 引用

> 封面图片：Ocean Background  
> 作者：KnoblePersona  
> 来源：[OpenGameArt.org](https://opengameart.org/content/ocean-background)  
> 许可协议：Creative Commons Attribution 3.0 (CC-BY 3.0)  